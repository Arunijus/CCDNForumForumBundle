{%- spaceless -%}
	{%- set route = app.request.attributes.get('_route') -%}

	{%- if topic is not defined -%}
		{%- if post is defined -%}
			{%- set topic = post.getTopic -%}
		{%- endif -%}
	{%- endif -%}

	{%- if board is not defined -%}
		{%- if topic is defined -%}
			{%- set board = topic.getBoard -%}
		{%- else -%}
			{%- if post is defined -%}
				{%- set board = topic.getBoard -%}
			{%- endif -%}
		{%- endif -%}
	{%- endif -%}

	{%- if category is not defined -%}
		{%- if board is defined -%}
			{%- set category = board.getCategory -%}
		{%- else -%}
			{%- if topic is defined -%}
				{%- set category = topic.getBoard -%}
			{%- endif -%}
		{%- endif -%}
	{%- endif -%}

	<li class="nav-header">
		{{- 'sidebar.header.navigation' | trans({}, 'CCDNForumForumBundle') -}}
	</li>

	{%- if is_granted('ROLE_ADMIN') -%}
		<li>
			<a href="{{- path('ccdn_forum_admin_index') -}}">
				<i class="glyphicon glyphicon-cog"></i>
				{{- 'link.admin.index' |trans({}, 'CCDNForumForumBundle') -}}
			</a>
		</li>
	{%- endif -%}


	{% if route|slice(0,16) != 'ccdn_forum_admin' -%}
	
		{%- if forum is defined and not null -%}
			{%- if route == 'ccdn_homepage'
				or route == 'ccdn_forum_user_category_index' -%}
				<li class="active">
					<a href="{{- path('ccdn_forum_user_category_index', {'forumName': forum.name}) -}}">
						<i class="glyphicon glyphicon-home"></i>
			{%- else -%}
				<li>
					<a href="{{- path('ccdn_forum_user_category_index', {'forumName': forum.name}) -}}">
						<i class="glyphicon glyphicon-home"></i>
			{%- endif -%}
						{{- 'link.category.index' |trans({}, 'CCDNForumForumBundle') -}}
					</a>
				</li>

			{%- if route|slice(0,28) != 'ccdn_forum_user_subscription' -%}
				{%- include 'CCDNForumForumBundle:Common:Layout/Sidebar/user_boards.html.twig' -%}
			{%- endif -%}
		{%- endif -%}



		{%- if is_granted('ROLE_USER') -%}
			{%- if forum is defined and not null -%}
				<li>
					<a rel="nofollow" href="{{- path('ccdn_forum_user_subscription_index', {'forumName': forum.name}) -}}">
						<i class="glyphicon glyphicon-heart"></i>
			{%- else -%}
				<li class="active">
					<a rel="nofollow" href="{{- path('ccdn_forum_user_subscription_index', {'forumName': '~'}) -}}">
						<i class="glyphicon glyphicon-heart"></i>
			{%- endif -%}
						{{- 'link.subscription.index' | trans({}, 'CCDNForumForumBundle') -}}
					</a>
				</li>

			{%- if route|slice(0,28) == 'ccdn_forum_user_subscription' -%}
				{%- include 'CCDNForumForumBundle:Common:Layout/Sidebar/user_subscriptions.html.twig' -%}
			{%- endif -%}
		{%- endif -%}
		
	{%- endif -%}


{%- endspaceless -%}
